---
- name: Install packages
  yum:
    name: "{{ item }}"
    state: latest
  with_items: 
    - yum-utils
    - docker-ce
    - telnet
    - python-pip
    - net-tools
    - ipmitool
    - wget
    - bridge-utils
    - tcpdump
    - iperf3

- name: Enable & start Docker
  systemd:
    state: started
    name: docker
    enabled: yes

- name: Insecure Docker local registry
  copy: src=daemon.json dest=/etc/docker/daemon.json

- name: Insecure Docker MountFlags shared
  copy: src=docker.service dest=/usr/lib/systemd/system/docker.service

- name: Daemon-reload and restart Docker
  systemd:
    state: restarted
    daemon_reload: yes
    name: docker

- name: install docker-py
  pip:
    name: docker==3.7.1

- name: install websocket-client
  pip:
    name: websocket-client==0.59.0

